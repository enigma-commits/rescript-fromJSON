var N=(e,r)=>()=>(r||e((r={exports:{}}).exports,r),r.exports);var De=N((_u,Ue)=>{function _e(e){return Array.isArray(e)?e:[e]}var Ae="",he=" ",H="\\",Rr=/^\s+$/,Mr=/(?:[^\\]|^)\\$/,kr=/^\\!/,xr=/^\\#/,Cr=/\r?\n/g,Tr=/^\.*\/|^\.+$/,Y="/",we="node-ignore";typeof Symbol<"u"&&(we=Symbol.for("node-ignore"));var me=we,Jr=(e,r,n)=>Object.defineProperty(e,r,{value:n}),Lr=/([0-z])-([0-z])/g,ye=()=>!1,zr=e=>e.replace(Lr,(r,n,t)=>n.charCodeAt(0)<=t.charCodeAt(0)?r:Ae),Wr=e=>{let{length:r}=e;return e.slice(0,r-r%2)},Pr=[[/\\?\s+$/,e=>e.indexOf("\\")===0?he:Ae],[/\\\s/g,()=>he],[/[\\$.|*+(){^]/g,e=>`\\${e}`],[/(?!\\)\?/g,()=>"[^/]"],[/^\//,()=>"^"],[/\//g,()=>"\\/"],[/^\^*\\\*\\\*\\\//,()=>"^(?:.*\\/)?"],[/^(?=[^^])/,function(){return/\/(?!$)/.test(this)?"^":"(?:^|\\/)"}],[/\\\/\\\*\\\*(?=\\\/|$)/g,(e,r,n)=>r+6<n.length?"(?:\\/[^\\/]+)*":"\\/.+"],[/(^|[^\\]+)(\\\*)+(?=.+)/g,(e,r,n)=>{let t=n.replace(/\\\*/g,"[^\\/]*");return r+t}],[/\\\\\\(?=[$.|*+(){^])/g,()=>H],[/\\\\/g,()=>H],[/(\\)?\[([^\]/]*?)(\\*)($|\])/g,(e,r,n,t,u)=>r===H?`\\[${n}${Wr(t)}${u}`:u==="]"&&t.length%2===0?`[${zr(n)}${t}]`:"[]"],[/(?:[^*])$/,e=>/\/$/.test(e)?`${e}$`:`${e}(?=$|\\/$)`],[/(\^|\\\/)?\\\*$/,(e,r)=>`${r?`${r}[^/]+`:"[^/]*"}(?=$|\\/$)`]],Ee=Object.create(null),Zr=(e,r)=>{let n=Ee[e];return n||(n=Pr.reduce((t,u)=>t.replace(u[0],u[1].bind(e)),e),Ee[e]=n),r?new RegExp(n,"i"):new RegExp(n)},re=e=>typeof e=="string",qr=e=>e&&re(e)&&!Rr.test(e)&&!Mr.test(e)&&e.indexOf("#")!==0,$r=e=>e.split(Cr),Q=class{constructor(r,n,t,u){this.origin=r,this.pattern=n,this.negative=t,this.regex=u}},Vr=(e,r)=>{let n=e,t=!1;e.indexOf("!")===0&&(t=!0,e=e.substr(1)),e=e.replace(kr,"!").replace(xr,"#");let u=Zr(e,r);return new Q(n,e,t,u)},Gr=(e,r)=>{throw new r(e)},B=(e,r,n)=>re(e)?e?B.isNotRelative(e)?n(`path should be a \`path.relative()\`d string, but got "${r}"`,RangeError):!0:n("path must not be empty",TypeError):n(`path must be a string, but got \`${r}\``,TypeError),Oe=e=>Tr.test(e);B.isNotRelative=Oe;B.convert=e=>e;var ee=class{constructor({ignorecase:r=!0,ignoreCase:n=r,allowRelativePaths:t=!1}={}){Jr(this,me,!0),this._rules=[],this._ignoreCase=n,this._allowRelativePaths=t,this._initCache()}_initCache(){this._ignoreCache=Object.create(null),this._testCache=Object.create(null)}_addPattern(r){if(r&&r[me]){this._rules=this._rules.concat(r._rules),this._added=!0;return}if(qr(r)){let n=Vr(r,this._ignoreCase);this._added=!0,this._rules.push(n)}}add(r){return this._added=!1,_e(re(r)?$r(r):r).forEach(this._addPattern,this),this._added&&this._initCache(),this}addPattern(r){return this.add(r)}_testOne(r,n){let t=!1,u=!1;return this._rules.forEach(i=>{let{negative:o}=i;if(u===o&&t!==u||o&&!t&&!u&&!n)return;i.regex.test(r)&&(t=!o,u=o)}),{ignored:t,unignored:u}}_test(r,n,t,u){let i=r&&B.convert(r);return B(i,r,this._allowRelativePaths?ye:Gr),this._t(i,n,t,u)}_t(r,n,t,u){if(r in n)return n[r];if(u||(u=r.split(Y)),u.pop(),!u.length)return n[r]=this._testOne(r,t);let i=this._t(u.join(Y)+Y,n,t,u);return n[r]=i.ignored?i:this._testOne(r,t)}ignores(r){return this._test(r,this._ignoreCache,!1).ignored}createFilter(){return r=>!this.ignores(r)}filter(r){return _e(r).filter(this.createFilter())}test(r){return this._test(r,this._testCache,!0)}},P=e=>new ee(e),Xr=e=>B(e&&B.convert(e),e,ye);P.isPathValid=Xr;P.default=P;Ue.exports=P;if(typeof process<"u"&&(process.env&&process.env.IGNORE_TEST_WIN32||process.platform==="win32")){let e=n=>/^\\\\\?\\/.test(n)||/["<>|\u0000-\u001F]+/u.test(n)?n:n.replace(/\\/g,"/");B.convert=e;let r=/^[a-z]:\//i;B.isNotRelative=n=>r.test(n)||Oe(n)}});var q=N(I=>{"use strict";function jr(e){return e.BS_PRIVATE_NESTED_SOME_NONE!==void 0}function Z(e){return e===void 0?{BS_PRIVATE_NESTED_SOME_NONE:0}:e!==null&&e.BS_PRIVATE_NESTED_SOME_NONE!==void 0?{BS_PRIVATE_NESTED_SOME_NONE:e.BS_PRIVATE_NESTED_SOME_NONE+1|0}:e}function Kr(e){if(e!=null)return Z(e)}function Hr(e){if(e!==void 0)return Z(e)}function Yr(e){if(e!==null)return Z(e)}function Ne(e){if(!(e!==null&&e.BS_PRIVATE_NESTED_SOME_NONE!==void 0))return e;var r=e.BS_PRIVATE_NESTED_SOME_NONE;if(r!==0)return{BS_PRIVATE_NESTED_SOME_NONE:r-1|0}}function Qr(e){if(e!==void 0)return Ne(e)}function en(e){return e!==void 0?e.VAL:e}I.nullable_to_opt=Kr;I.undefined_to_opt=Hr;I.null_to_opt=Yr;I.valFromOption=Ne;I.some=Z;I.isNested=jr;I.option_get=Qr;I.option_unwrap=en});var Fe=N(M=>{"use strict";var rn=q();function nn(e,r){if(r in e)return rn.some(e[r])}var tn=function(e,r){delete e[r]};function un(e){for(var r=Object.keys(e),n=r.length,t=new Array(n),u=0;u<n;++u){var i=r[u];t[u]=[i,e[i]]}return t}function on(e){for(var r=Object.keys(e),n=r.length,t=new Array(n),u=0;u<n;++u)t[u]=e[r[u]];return t}function cn(e){for(var r={},n=e;;){var t=n;if(!t)return r;var u=t.hd;r[u[0]]=u[1],n=t.tl}}function an(e){for(var r={},n=e.length,t=0;t<n;++t){var u=e[t];r[u[0]]=u[1]}return r}function sn(e,r){for(var n={},t=Object.keys(r),u=t.length,i=0;i<u;++i){var o=t[i];n[o]=e(r[o])}return n}M.get=nn;M.unsafeDeleteKey=tn;M.entries=un;M.values=on;M.fromList=cn;M.fromArray=an;M.map=sn});var be=N(p=>{"use strict";function ln(e,r){return e<r?-1:e===r?0:1}function fn(e,r){return e?r?0:1:r?-1:0}function vn(e,r){return e===r?0:e<r?-1:e>r||e===e?1:r===r?-1:0}function dn(e,r){return e===r?0:e<r?-1:1}function gn(e,r){return e&&r}function pn(e,r){return e<r?e:r}function _n(e,r){return e<r?e:r}function hn(e,r){return e<r?e:r}function mn(e,r){return e||r}function En(e,r){return e>r?e:r}function An(e,r){return e>r?e:r}function wn(e,r){return e>r?e:r}function Se(e,r){return e[1]===r[1]?e[0]===r[0]:!1}function ne(e,r){var n=r[0],t=e[0];return t>n?!0:t<n?!1:e[1]>=r[1]}function yn(e,r){return!Se(e,r)}function On(e,r){return!ne(e,r)}function te(e,r){return e[0]>r[0]?!0:e[0]<r[0]?!1:e[1]>r[1]}function Un(e,r){return!te(e,r)}function Dn(e,r){return ne(e,r)?r:e}function Nn(e,r){return te(e,r)?e:r}p.int_compare=ln;p.bool_compare=fn;p.float_compare=vn;p.string_compare=dn;p.bool_min=gn;p.int_min=pn;p.float_min=_n;p.string_min=hn;p.bool_max=mn;p.int_max=En;p.float_max=An;p.string_max=wn;p.i64_eq=Se;p.i64_neq=yn;p.i64_lt=On;p.i64_gt=te;p.i64_le=Un;p.i64_ge=ne;p.i64_min=Dn;p.i64_max=Nn});var ue=N(R=>{"use strict";function Fn(e,r,n){for(var t=new Array(n),u=0,i=r;u<n;)t[u]=e[i],u=u+1|0,i=i+1|0;return t}function Sn(e,r){for(;;){var n=r,t=e;if(!n)return t;r=n.tl,e=n.hd.length+t|0}}function bn(e,r,n){for(;;){var t=n,u=r;if(!t)return;for(var i=t.hd,o=i.length,c=u,a=0;a<o;)e[c]=i[a],c=c+1|0,a=a+1|0;n=t.tl,r=c}}function Bn(e){var r=Sn(0,e),n=new Array(r);return bn(n,0,e),n}function In(e,r,n){if(r<0||r>=e.length)throw{RE_EXN_ID:"Invalid_argument",_1:"index out of bounds",Error:new Error};e[r]=n}function Rn(e,r){if(r<0||r>=e.length)throw{RE_EXN_ID:"Invalid_argument",_1:"index out of bounds",Error:new Error};return e[r]}function Mn(e,r){for(var n=new Array(e),t=0;t<e;++t)n[t]=r;return n}function kn(e){for(var r=new Array(e),n=0;n<e;++n)r[n]=0;return r}function xn(e,r,n,t,u){if(t<=r){for(var i=0;i<u;++i)n[i+t|0]=e[i+r|0];return}for(var o=u-1|0;o>=0;--o)n[o+t|0]=e[o+r|0]}function Cn(e){return e.slice(0)}R.dup=Cn;R.sub=Fn;R.concat=Bn;R.make=Mn;R.make_float=kn;R.blit=xn;R.get=Rn;R.set=In});var ie=N(E=>{"use strict";var Be=ue();function l(e,r){for(;;){var n=r,t=e,u=t.length,i=u===0?1:u,o=n.length,c=i-o|0;if(c===0)return t.apply(null,n);if(c>=0)return function(a,f){return function(d){return l(a,f.concat([d]))}}(t,n);r=Be.sub(n,i,-c|0),e=t.apply(null,Be.sub(n,0,i))}}function Ie(e,r){var n=e.length;if(n===1)return e(r);switch(n){case 1:return e(r);case 2:return function(t){return e(r,t)};case 3:return function(t,u){return e(r,t,u)};case 4:return function(t,u,i){return e(r,t,u,i)};case 5:return function(t,u,i,o){return e(r,t,u,i,o)};case 6:return function(t,u,i,o,c){return e(r,t,u,i,o,c)};case 7:return function(t,u,i,o,c,a){return e(r,t,u,i,o,c,a)};default:return l(e,[r])}}function Tn(e){var r=e.length;return r===1?e:function(n){return Ie(e,n)}}function Re(e,r,n){var t=e.length;if(t===2)return e(r,n);switch(t){case 1:return l(e(r),[n]);case 2:return e(r,n);case 3:return function(u){return e(r,n,u)};case 4:return function(u,i){return e(r,n,u,i)};case 5:return function(u,i,o){return e(r,n,u,i,o)};case 6:return function(u,i,o,c){return e(r,n,u,i,o,c)};case 7:return function(u,i,o,c,a){return e(r,n,u,i,o,c,a)};default:return l(e,[r,n])}}function Jn(e){var r=e.length;return r===2?e:function(n,t){return Re(e,n,t)}}function Me(e,r,n,t){var u=e.length;if(u===3)return e(r,n,t);switch(u){case 1:return l(e(r),[n,t]);case 2:return l(e(r,n),[t]);case 3:return e(r,n,t);case 4:return function(i){return e(r,n,t,i)};case 5:return function(i,o){return e(r,n,t,i,o)};case 6:return function(i,o,c){return e(r,n,t,i,o,c)};case 7:return function(i,o,c,a){return e(r,n,t,i,o,c,a)};default:return l(e,[r,n,t])}}function Ln(e){var r=e.length;return r===3?e:function(n,t,u){return Me(e,n,t,u)}}function ke(e,r,n,t,u){var i=e.length;if(i===4)return e(r,n,t,u);switch(i){case 1:return l(e(r),[n,t,u]);case 2:return l(e(r,n),[t,u]);case 3:return l(e(r,n,t),[u]);case 4:return e(r,n,t,u);case 5:return function(o){return e(r,n,t,u,o)};case 6:return function(o,c){return e(r,n,t,u,o,c)};case 7:return function(o,c,a){return e(r,n,t,u,o,c,a)};default:return l(e,[r,n,t,u])}}function zn(e){var r=e.length;return r===4?e:function(n,t,u,i){return ke(e,n,t,u,i)}}function xe(e,r,n,t,u,i){var o=e.length;if(o===5)return e(r,n,t,u,i);switch(o){case 1:return l(e(r),[n,t,u,i]);case 2:return l(e(r,n),[t,u,i]);case 3:return l(e(r,n,t),[u,i]);case 4:return l(e(r,n,t,u),[i]);case 5:return e(r,n,t,u,i);case 6:return function(c){return e(r,n,t,u,i,c)};case 7:return function(c,a){return e(r,n,t,u,i,c,a)};default:return l(e,[r,n,t,u,i])}}function Wn(e){var r=e.length;return r===5?e:function(n,t,u,i,o){return xe(e,n,t,u,i,o)}}function Ce(e,r,n,t,u,i,o){var c=e.length;if(c===6)return e(r,n,t,u,i,o);switch(c){case 1:return l(e(r),[n,t,u,i,o]);case 2:return l(e(r,n),[t,u,i,o]);case 3:return l(e(r,n,t),[u,i,o]);case 4:return l(e(r,n,t,u),[i,o]);case 5:return l(e(r,n,t,u,i),[o]);case 6:return e(r,n,t,u,i,o);case 7:return function(a){return e(r,n,t,u,i,o,a)};default:return l(e,[r,n,t,u,i,o])}}function Pn(e){var r=e.length;return r===6?e:function(n,t,u,i,o,c){return Ce(e,n,t,u,i,o,c)}}function Te(e,r,n,t,u,i,o,c){var a=e.length;if(a===7)return e(r,n,t,u,i,o,c);switch(a){case 1:return l(e(r),[n,t,u,i,o,c]);case 2:return l(e(r,n),[t,u,i,o,c]);case 3:return l(e(r,n,t),[u,i,o,c]);case 4:return l(e(r,n,t,u),[i,o,c]);case 5:return l(e(r,n,t,u,i),[o,c]);case 6:return l(e(r,n,t,u,i,o),[c]);case 7:return e(r,n,t,u,i,o,c);default:return l(e,[r,n,t,u,i,o,c])}}function Zn(e){var r=e.length;return r===7?e:function(n,t,u,i,o,c,a){return Te(e,n,t,u,i,o,c,a)}}function Je(e,r,n,t,u,i,o,c,a){var f=e.length;if(f===8)return e(r,n,t,u,i,o,c,a);switch(f){case 1:return l(e(r),[n,t,u,i,o,c,a]);case 2:return l(e(r,n),[t,u,i,o,c,a]);case 3:return l(e(r,n,t),[u,i,o,c,a]);case 4:return l(e(r,n,t,u),[i,o,c,a]);case 5:return l(e(r,n,t,u,i),[o,c,a]);case 6:return l(e(r,n,t,u,i,o),[c,a]);case 7:return l(e(r,n,t,u,i,o,c),[a]);default:return l(e,[r,n,t,u,i,o,c,a])}}function qn(e){var r=e.length;return r===8?e:function(n,t,u,i,o,c,a,f){return Je(e,n,t,u,i,o,c,a,f)}}E.app=l;E._1=Ie;E.__1=Tn;E._2=Re;E.__2=Jn;E._3=Me;E.__3=Ln;E._4=ke;E.__4=zn;E._5=xe;E.__5=Wn;E._6=Ce;E.__6=Pn;E._7=Te;E.__7=Zn;E._8=Je;E.__8=qn});var Le=N($=>{"use strict";function $n(e,r){return e===r}var Vn=2147483647,Gn=-2147483648;$.equal=$n;$.max=Vn;$.min=Gn});var We=N(x=>{"use strict";var k=Le();function Xn(e){return Math.ceil(e)}function ze(e){return e>k.max?k.max:e<k.min?k.min:Math.ceil(e)}function jn(e){return Math.floor(e)}function oe(e){return e>k.max?k.max:e<k.min?k.min:Math.floor(e)}function Kn(e,r){return oe(Math.random()*(r-e|0))+e|0}var Hn=ze,Yn=oe;x.unsafe_ceil=Xn;x.ceil_int=ze;x.ceil=Hn;x.unsafe_floor=jn;x.floor_int=oe;x.floor=Yn;x.random_int=Kn});var dr=N(s=>{"use strict";var F=be(),g=ie(),Qn=We(),ce=q();function et(e,r){if(r>=0&&r<e.length)return ce.some(e[r])}function rt(e,r){if(!(r>=0&&r<e.length))throw{RE_EXN_ID:"Assert_failure",_1:["belt_Array.ml",35,2],Error:new Error};return e[r]}function nt(e,r,n){return r>=0&&r<e.length?(e[r]=n,!0):!1}function tt(e,r,n){if(!(r>=0&&r<e.length))throw{RE_EXN_ID:"Assert_failure",_1:["belt_Array.ml",45,2],Error:new Error};e[r]=n}function Pe(e,r,n){var t=e[r];e[r]=e[n],e[n]=t}function ae(e){for(var r=e.length,n=0;n<r;++n)Pe(e,n,Qn.random_int(n,r))}function ut(e){var r=e.slice(0);return ae(r),r}function it(e){for(var r=e.length,n=0,t=0,u=r/2|0;t<u;++t)Pe(e,n+t|0,((n+r|0)-t|0)-1|0)}function ot(e){for(var r=e.length,n=new Array(r),t=0;t<r;++t)n[t]=e[(r-1|0)-t|0];return n}function ct(e,r){if(e<=0)return[];for(var n=new Array(e),t=0;t<e;++t)n[t]=r;return n}function se(e,r){if(e<=0)return[];for(var n=new Array(e),t=0;t<e;++t)n[t]=r(t);return n}function at(e,r){return se(e,g.__1(r))}function Ze(e,r){var n=se(e,r);return ae(n),n}function st(e,r){return Ze(e,g.__1(r))}function lt(e,r){var n=r-e|0;if(n<0)return[];for(var t=new Array(n+1|0),u=0;u<=n;++u)t[u]=e+u|0;return t}function ft(e,r,n){var t=r-e|0;if(t<0||n<=0)return[];for(var u=(t/n|0)+1|0,i=new Array(u),o=e,c=0;c<u;++c)i[c]=o,o=o+n|0;return i}function vt(e,r){for(var n=e.length,t=r.length,u=n<t?n:t,i=new Array(u),o=0;o<u;++o)i[o]=[e[o],r[o]];return i}function qe(e,r,n){for(var t=e.length,u=r.length,i=t<u?t:u,o=new Array(i),c=0;c<i;++c)o[c]=n(e[c],r[c]);return o}function dt(e,r,n){return qe(e,r,g.__2(n))}function gt(e,r){for(var n=e.length,t=r.length,u=new Array(n+t|0),i=0;i<n;++i)u[i]=e[i];for(var o=0;o<t;++o)u[n+o|0]=r[o];return u}function le(e){for(var r=e.length,n=0,t=0;t<r;++t)n=n+e[t].length|0;var u=new Array(n);n=0;for(var i=0;i<r;++i)for(var o=e[i],c=0,a=o.length;c<a;++c)u[n]=o[c],n=n+1|0;return u}function pt(e,r,n){if(n<=0)return[];var t=e.length,u=r<0?F.int_max(t+r|0,0):r,i=t-u|0,o=i<n?i:n;if(o<=0)return[];for(var c=new Array(o),a=0;a<o;++a)c[a]=e[u+a|0];return c}function _t(e,r){for(var n=e.length,t=r<0?F.int_max(n+r|0,0):r,u=n>t?n-t|0:0,i=new Array(u),o=0;o<u;++o)i[o]=e[t+o|0];return i}function ht(e,r,n,t){if(!(n<=0)){var u=e.length,i=r<0?F.int_max(u+r|0,0):r,o=u-i|0,c=o<n?o:n;if(!(c<=0))for(var a=i,f=i+c|0;a<f;++a)e[a]=t}}function mt(e,r,n,t,u){if(t<=r){for(var i=0;i<u;++i)n[i+t|0]=e[i+r|0];return}for(var o=u-1|0;o>=0;--o)n[o+t|0]=e[o+r|0]}function Et(e,r,n,t,u){var i=e.length,o=n.length,c=r<0?F.int_max(i+r|0,0):r,a=t<0?F.int_max(o+t|0,0):t,f=F.int_min(u,F.int_min(i-c|0,o-a|0));if(a<=c){for(var d=0;d<f;++d)n[d+a|0]=e[d+c|0];return}for(var v=f-1|0;v>=0;--v)n[v+a|0]=e[v+c|0]}function $e(e,r){for(var n=0,t=e.length;n<t;++n)r(e[n])}function At(e,r){$e(e,g.__1(r))}function V(e,r){for(var n=e.length,t=new Array(n),u=0;u<n;++u)t[u]=r(e[u]);return t}function wt(e,r){return V(e,g.__1(r))}function yt(e,r){return le(V(e,r))}function Ot(e,r){return le(V(e,g.__1(r)))}function Ve(e,r){for(var n=e.length,t=0,u;u===void 0&&t<n;){var i=e[t];r(i)&&(u=ce.some(i)),t=t+1|0}return u}function Ut(e,r){return Ve(e,g.__1(r))}function Ge(e,r){for(var n=e.length,t=0,u;u===void 0&&t<n;){var i=e[t];r(i)&&(u=t),t=t+1|0}return u}function Dt(e,r){return Ge(e,g.__1(r))}function Xe(e,r){for(var n=e.length,t=new Array(n),u=0,i=0;i<n;++i){var o=e[i];r(o)&&(t[u]=o,u=u+1|0)}return t.length=u,t}function Nt(e,r){return Xe(e,g.__1(r))}function je(e,r){for(var n=e.length,t=new Array(n),u=0,i=0;i<n;++i){var o=e[i];r(o,i)&&(t[u]=o,u=u+1|0)}return t.length=u,t}function Ft(e,r){return je(e,g.__2(r))}function Ke(e,r){for(var n=e.length,t=new Array(n),u=0,i=0;i<n;++i){var o=e[i],c=r(o);c!==void 0&&(t[u]=ce.valFromOption(c),u=u+1|0)}return t.length=u,t}function St(e,r){return Ke(e,g.__1(r))}function He(e,r){for(var n=0,t=e.length;n<t;++n)r(n,e[n])}function bt(e,r){He(e,g.__2(r))}function Ye(e,r){for(var n=e.length,t=new Array(n),u=0;u<n;++u)t[u]=r(u,e[u]);return t}function Bt(e,r){return Ye(e,g.__2(r))}function Qe(e,r,n){for(var t=r,u=0,i=e.length;u<i;++u)t=n(t,e[u]);return t}function It(e,r,n){return Qe(e,r,g.__2(n))}function er(e,r,n){for(var t=r,u=e.length-1|0;u>=0;--u)t=n(t,e[u]);return t}function Rt(e,r,n){return er(e,r,g.__2(n))}function rr(e,r,n,t){for(var u=n,i=F.int_min(e.length,r.length),o=i-1|0;o>=0;--o)u=t(u,e[o],r[o]);return u}function Mt(e,r,n,t){return rr(e,r,n,g.__3(t))}function nr(e,r,n){for(var t=r,u=0,i=e.length;u<i;++u)t=n(t,e[u],u);return t}function kt(e,r,n){return nr(e,r,g.__3(n))}function tr(e,r){for(var n=e.length,t=0;;){var u=t;if(u===n)return!0;if(!r(e[u]))return!1;t=u+1|0}}function xt(e,r){return tr(e,g.__1(r))}function ur(e,r){for(var n=e.length,t=0;;){var u=t;if(u===n)return!1;if(r(e[u]))return!0;t=u+1|0}}function Ct(e,r){return ur(e,g.__1(r))}function ir(e,r,n,t,u){for(;;){var i=n;if(i===u)return!0;if(!t(e[i],r[i]))return!1;n=i+1|0}}function or(e,r,n){return ir(e,r,0,n,F.int_min(e.length,r.length))}function Tt(e,r,n){return or(e,r,g.__2(n))}function cr(e,r,n){for(var t=0,u=F.int_min(e.length,r.length);;){var i=t;if(i===u)return!1;if(n(e[i],r[i]))return!0;t=i+1|0}}function Jt(e,r,n){return cr(e,r,g.__2(n))}function ar(e,r,n){var t=e.length,u=r.length;return t===u?ir(e,r,0,n,t):!1}function Lt(e,r,n){return ar(e,r,g.__2(n))}function sr(e,r,n){var t=e.length,u=r.length;if(t>u)return 1;if(t<u)return-1;for(var i=0;;){var o=i;if(o===t)return 0;var c=n(e[o],r[o]);if(c!==0)return c;i=o+1|0}}function zt(e,r,n){return sr(e,r,g.__2(n))}function lr(e,r){for(var n=e.length,t=0,u=0,i=new Array(n),o=new Array(n),c=0;c<n;++c){var a=e[c];r(a)?(i[t]=a,t=t+1|0):(o[u]=a,u=u+1|0)}return i.length=t,o.length=u,[i,o]}function Wt(e,r){return lr(e,g.__1(r))}function Pt(e){for(var r=e.length,n=new Array(r),t=new Array(r),u=0;u<r;++u){var i=e[u];n[u]=i[0],t[u]=i[1]}return[n,t]}function fr(e,r,n){var t=e.length;if(t===0)return"";for(var u=t-1|0,i=0,o="";;){var c=o,a=i;if(a===u)return c+n(e[a]);o=c+(n(e[a])+r),i=a+1|0}}function Zt(e,r,n){return fr(e,r,g.__1(n))}function vr(e,r){for(var n=new Array(e),t=0;t<e;++t)n[t]=r(t);return n}function qt(e,r){return vr(e,g.__1(r))}s.get=et;s.getExn=rt;s.set=nt;s.setExn=tt;s.shuffleInPlace=ae;s.shuffle=ut;s.reverseInPlace=it;s.reverse=ot;s.make=ct;s.range=lt;s.rangeBy=ft;s.makeByU=se;s.makeBy=at;s.makeByAndShuffleU=Ze;s.makeByAndShuffle=st;s.zip=vt;s.zipByU=qe;s.zipBy=dt;s.unzip=Pt;s.concat=gt;s.concatMany=le;s.slice=pt;s.sliceToEnd=_t;s.fill=ht;s.blit=Et;s.blitUnsafe=mt;s.forEachU=$e;s.forEach=At;s.mapU=V;s.map=wt;s.flatMapU=yt;s.flatMap=Ot;s.getByU=Ve;s.getBy=Ut;s.getIndexByU=Ge;s.getIndexBy=Dt;s.keepU=Xe;s.keep=Nt;s.keepWithIndexU=je;s.keepWithIndex=Ft;s.keepMapU=Ke;s.keepMap=St;s.forEachWithIndexU=He;s.forEachWithIndex=bt;s.mapWithIndexU=Ye;s.mapWithIndex=Bt;s.partitionU=lr;s.partition=Wt;s.reduceU=Qe;s.reduce=It;s.reduceReverseU=er;s.reduceReverse=Rt;s.reduceReverse2U=rr;s.reduceReverse2=Mt;s.reduceWithIndexU=nr;s.reduceWithIndex=kt;s.joinWithU=fr;s.joinWith=Zt;s.someU=ur;s.some=Ct;s.everyU=tr;s.every=xt;s.every2U=or;s.every2=Tt;s.some2U=cr;s.some2=Jt;s.cmpU=sr;s.cmp=zt;s.eqU=ar;s.eq=Lt;s.initU=vr;s.init=qt});var wr=N(_=>{"use strict";var C=ie(),U=q();function gr(e,r){if(e!==void 0&&r(U.valFromOption(e)))return e}function $t(e,r){return gr(e,C.__1(r))}function pr(e,r){if(e!==void 0)return r(U.valFromOption(e))}function Vt(e,r){pr(e,C.__1(r))}function Gt(e){if(e!==void 0)return U.valFromOption(e);throw{RE_EXN_ID:"Not_found",Error:new Error}}function _r(e,r,n){return e!==void 0?n(U.valFromOption(e)):r}function Xt(e,r,n){return _r(e,r,C.__1(n))}function hr(e,r){if(e!==void 0)return U.some(r(U.valFromOption(e)))}function jt(e,r){return hr(e,C.__1(r))}function mr(e,r){if(e!==void 0)return r(U.valFromOption(e))}function Kt(e,r){return mr(e,C.__1(r))}function Ht(e,r){return e!==void 0?U.valFromOption(e):r}function Yt(e,r){return e!==void 0?e:r}function Qt(e){return e!==void 0}function eu(e){return e===void 0}function Er(e,r,n){return e!==void 0?r!==void 0?n(U.valFromOption(e),U.valFromOption(r)):!1:r===void 0}function ru(e,r,n){return Er(e,r,C.__2(n))}function Ar(e,r,n){return e!==void 0?r!==void 0?n(U.valFromOption(e),U.valFromOption(r)):1:r!==void 0?-1:0}function nu(e,r,n){return Ar(e,r,C.__2(n))}_.keepU=gr;_.keep=$t;_.forEachU=pr;_.forEach=Vt;_.getExn=Gt;_.mapWithDefaultU=_r;_.mapWithDefault=Xt;_.mapU=hr;_.map=jt;_.flatMapU=mr;_.flatMap=Kt;_.getWithDefault=Ht;_.orElse=Yt;_.isSome=Qt;_.isNone=eu;_.eqU=Er;_.eq=ru;_.cmpU=Ar;_.cmp=nu});var Br=N(h=>{"use strict";var yr=Fe(),J=dr(),A=ue(),tu=wr();function uu(e){return e.length>0?e.charAt(0).toLowerCase()+e.slice(1):e}function w(e){return e.length>0?e.charAt(0).toUpperCase()+e.slice(1):e}function L(e,r,n){for(;;){var t=r,u=e,i=new RegExp("(type\\s"+t+`+)\\s[=]
*\\s+({([a-zA-Z0-9_ :.,
*\\s<>]+)})+`),o=new RegExp("type\\s+"+t+"+\\s*=\\s*(|[^|]+)"),c=new RegExp("type\\s+"+t+`\\s*=\\s*[\\|?\\s]\\s*([A-Z][a-zA-Z0-9()_\\s|]+)
`),a=u.match(i);if(a!==null)return[1,A.get(J.keepMap(a,function(K){return K}),2)];var f=u.match(o);if(f!==null){var d=u.match(c);if(d!==null)return[0,A.get(J.keepMap(d,function(K){return K}),1)];var v=t.split(".");if(v.length!==2)return[0,"// Unable to find type of "+t];var m=v[0],y=v[1],D=yr.get(n,m);if(D===void 0)return[0,"// Unable to find type of "+y];r=y,e=D;continue}var S=t.split(".");if(S.length!==2)return[1,"// Unable to find type of "+t];var b=S[0],T=S[1],W=yr.get(n,b);if(W===void 0)return[1,"// Unable to find type of "+T];r=T,e=W}}function Or(e){return e.startsWith("option")?"None":e.startsWith("array")?"[]":e.startsWith("Js.Nullable")?"Js.Json.null":"default"+w(e)}function Ur(e){switch(e){case"Js.Json.t":return"Js.Dict.empty()->Js.Json.object_";case"bool":return"false";case"float":return"0.0";case"int":return"0";case"string":return'""';default:return Or(e)}}function G(e){return e.replace(/array<([a-zA-Z\.<>.]+)>/g,"$1").replace(/option<([a-zA-Z\.<>.]+)>/g,"$1")}function fe(e,r,n){var t=G(r),u=L(e,t,n),i=u[1],o=i.replace(/([A-Za-z0-9_^]+)+\s*[:]\s+([a-zA-Z0-9_.<>]+)/g,function(m,y,D,S,b){var T=Ur(D);return""+y+" : "+T});if(u[0])return"let default"+w(t)+" = "+o+`

`;var c=J.get(i.split("|"),1);if(c===void 0)return"";var a=/^([a-zA-Z_]\w*)\(([a-zA-Z_]\w*)\)$/,f=a.exec(c.trim());if(f===null)return"let default"+w(t)+" = "+c+`
`;var d=A.get(f,1),v=A.get(f,2);return"let default"+w(t)+" = "+d+"(default"+w(v)+`)
`}function iu(e){return e.replace(/\|\s\"[A-Z][A-Za-z0-9]+[\(]+[a-zA-Z0-9_]+[\)]+\"\s=>\s([A-Z][A-Za-z0-9]+)[\(]+([a-zA-Z0-9_]+)[\)]+/g,function(r,n,t,u,i){return'| "'+n+'" => get'+w(t)+"() // Call you custom function here"})}function ve(e){return e.replace(/(\([a-zA-Z0-9_\",\s]+\))/g,"")}function de(e,r){switch(e){case"Js.Json.t":return'getJsonObjectFromDict(dict, "'+r+'")';case"array<float>":return'getFloatArrayFromDict(dict, "'+r+'")';case"array<int>":return'getIntArrayFromDict(dict, "'+r+'", [])';case"array<string>":return'getStrArrayFromDict(dict, "'+r+'", [])';case"bool":return'getBool(dict, "'+r+'", false)';case"float":return'getFloat(dict, "'+r+'", 0.0)';case"int":return'getInt(dict, "'+r+'", 0)';case"option<Js.Json.t>":return'getOptionalJsonFromDict(dict, "'+r+'")';case"option<array<float>>":return'getOptionFloatArrayFromDict(dict, "'+r+'")';case"option<array<int>>":return'getOptionIntArrayFromDict(dict, "'+r+'")';case"option<array<string>>":return'getOptionStrArrayFromDict(dict, "'+r+'")';case"option<bool>":return'getOptionBool(dict, "'+r+'")';case"option<float>":return'getOptionFloat(dict, "'+r+'")';case"option<int>":return'getOptionInt(dict, "'+r+'")';case"option<string>":return'getOptionString(dict, "'+r+'")';case"string":return'getString(dict, "'+r+'", "")';default:return"||get"+w(r)+'(dict, "'+r+'")**'+e+"**||"}}function ge(e,r){switch(e){case"Js.Json.t":return'getJsonObjectFromDict(dict, "'+r+'")';case"array<float>":return'getFloatArrayFromDict(dict, "'+r+'")';case"array<int>":return'getIntArrayFromDict(dict, "'+r+'", [])';case"array<string>":return'getStrArrayFromDict(dict, "'+r+'", [])';case"bool":return'getBool(dict, "'+r+'", false)';case"float":return'getFloat(dict, "'+r+'", 0.0)';case"int":return'getInt(dict, "'+r+'", 0)';case"option<Js.Json.t>":return'getOptionalJsonFromDict(dict, "'+r+'")';case"option<array<float>>":return'getOptionFloatArrayFromDict(dict, "'+r+'")';case"option<array<int>>":return'getOptionIntArrayFromDict(dict, "'+r+'")';case"option<array<string>>":return'getOptionStrArrayFromDict(dict, "'+r+'")';case"option<bool>":return'getOptionBool(dict, "'+r+'")';case"option<float>":return'getOptionFloat(dict, "'+r+'")';case"option<int>":return'getOptionInt(dict, "'+r+'")';case"option<string>":return'getOptionString(dict, "'+r+'")';case"string":return'getString(dict, "'+r+'", "")';default:return"||get"+w(r)+'Option(dict, "'+r+'")***'+e+"***||"}}function X(e){console.log("enumFunctionMapper "+e);var r=/^([a-zA-Z_]\w*)\(([a-zA-Z_]\w*)\)$/,n=r.exec(e);if(n!==null){console.log("match");var t=A.get(n,1),u=A.get(n,2),i=ge(u,u);return""+i+" -> Belt.Option.map(x => "+t+"(x))"}var o='		| "'+e.trim()+'" => Some('+e+")";return`  switch str {
`+o+`
		| _ => None
    }`}function Dr(e,r,n,t){var u="let "+e+` = (dict, key) => {
  dict
  ->Js.Dict.get(key)`,i="->Belt.Option.flatMap(Js.Json.decodeObject)";if(/^option<([a-zA-Z0-9]+)>/.test(r)&&t===1)return""+u+`
  `+i+`
  ->Belt.Option.map(dict => {
`+n+`
  })
}
`;if(/^option<([a-zA-Z0-9]+)>/.test(r)&&t===0)return""+u+`
  ->Belt.Option.flatMap(Js.Json.decodeString)
  ->Belt.Option.map(str => {
      
`+n+`
  })
}
`;if(/^array<([a-zA-Z0-9.]+)>/.test(r)){var o=!1;return""+u+`
   ->Belt.Option.flatMap(Js.Json.decodeArray)
   ->Belt.Option.getWithDefault([])
   ->Belt.Array.keepMap(Js.Json.decodeObject)
   ->Js.Array2.map(dict => {
       `+n+`
   })`+(o?"->Some":"")+`
}
`}else return/^option<array<([a-zA-Z0-9]+)>>/.test(r)?"let "+e+` = (dict, key) => {
    switch dict->Js.Dict.get(key)->Belt.Option.flatMap(Js.Json.decodeArray) {
  | Some(arr) =>
    arr
    `+i+`
    ->Js.Array2.map(dict => {
       `+n+`
    })
    ->Some
  | None => None
   }
}
`:t===1?""+u+`
  `+i+`
  ->Belt.Option.map(dict => {
     `+n+`
  })->Belt.Option.getWithDefault(default`+w(r)+`)
}
`:""+u+`
  ->Belt.Option.flatMap(Js.Json.decodeString)
  ->Belt.Option.map(str => {
      
`+n+`
  })->Belt.Option.getWithDefault(default`+w(r)+`)
}
`}function Nr(e,r,n,t){var u="let "+e+` = (dict, _key) => {
  Some(dict)`;if(/^option<([a-zA-Z0-9]+)>/.test(r)&&t===1)return""+u+`
  ->Belt.Option.map(dict => {
`+n+`
  })
}
`;if(/^option<([a-zA-Z0-9]+)>/.test(r)&&t===0)return""+u+`
  ->Belt.Option.map(dict => {
      
`+n+`
  })
}
`;if(/^array<([a-zA-Z0-9.]+)>/.test(r)){var i=!1;return""+u+`
   ->Belt.Option.getWithDefault([])
   ->Belt.Array.keepMap(Js.Json.decodeObject)
   ->Js.Array2.map(dict => {
      `+n+`
   })`+(i?"->Some":"")+`
}
`}else return/^option<array<([a-zA-Z0-9]+)>>/.test(r)?"let "+e+` = (dict, key) => {
    switch dict->Js.Dict.get(key)->Belt.Option.flatMap(Js.Json.decodeArray) {
  | Some(arr) =>
    arr
    ->Belt.Option.flatMap(Js.Json.decodeObject)
    ->Js.Array2.map(dict => {
       `+n+`
    })
    ->Some
  | None => None
   }
}
`:t===1?""+u+`
  ->Belt.Option.map(dict => {
     `+n+`
  })->Belt.Option.getWithDefault(default`+w(r)+") -> returnNonDefault(default"+w(r)+`)
}
`:""+u+`
  ->Belt.Option.map(dict => {
      
`+n+`
  })->Belt.Option.getWithDefault(default`+w(r)+") -> returnNonDefault(default"+w(r)+`)
}
`}function Fr(e,r,n,t){var u=G(n),i=ve(r),o=L(e,u,t),c=o[1],a=o[0],f;if(a)f=c.replace(/([A-Za-z0-9_^]+)+\s*[:]\s+([a-zA-Z0-9_.<>]+)/g,function(v,m,y,D,S){var b=de(y,m);return"	"+m+" : "+b+" "});else{var d=c.split("|").reduce(function(v,m){var y=m.replace(`
`,"").trim();return v+(" -> Belt.Option.orElse("+X(y)+")")},"")+"-> Belt.Option.getExn";f=`  None
      
`+d}return Dr(i,n,f,a)}function Sr(e,r,n,t){var u=G(n),i=L(e,u,t),o=i[1],c=i[0],a;if(c)a=o.replace(/([A-Za-z0-9_^]+)+\s*[:]\s+([a-zA-Z0-9_.<>]+)/g,function(v,m,y,D,S){var b=ge(y,m);return"	"+m+" : "+b+" "});else{var f=o.split("|").reduce(function(v,m){var y=m.replace(`
`,"").trim();return v+(" -> Belt.Option.orElse("+X(y)+")")},"")+" -> Belt.Option.getExn";a=`  None
      
`+f}var d=ve(r);return Nr(d,n,a,c)}function br(e,r,n){for(var t={contents:e},u=e;;){var i=u,o=i.match(/\|\|(.*?)\*\*\*(.*?)\*\*\*\|\|/);if(o!==null){var c=J.keepMap(o,function(D){return D}),a=fe(r,A.get(c,2),n),f=Sr(r,A.get(c,1),A.get(c,2),n);t.contents=(a+`
`+f+`
`+t.contents).replace(A.get(c,0),A.get(c,1)),u=t.contents;continue}var d=i.match(/\|\|(.*?)\*\*(.*?)\*\*\|\|/);if(d===null)return t.contents;var v=J.keepMap(d,function(D){return D}),m=fe(r,A.get(v,2),n),y=Fr(r,A.get(v,1),A.get(v,2),n);t.contents=(m+`
`+y+`
`+t.contents).replace(A.get(v,0),A.get(v,1)),u=t.contents}}function ou(e,r,n){var t=L(r,e,n),u=t[1],i=t[0],o;if(i)o=u.replace(/(@as+[A-Za-z0-9_()^@\\\\\"]+)?\s+([A-Za-z0-9_\"\\^]+)+\s*[:]\s+([a-zA-Z0-9_.<>]+)/g,function(f,d,v,m,y,D){var S=tu.getWithDefault(d,"").replace('"',"").replace('"',"").replace("(","").replace(")","").replace("@as",""),b=v.trim(),T=m.trim(),W=de(T,S.length>0?S:b);return"	"+b+" : "+W+`
`});else{var c=u.split("|").reduce(function(f,d){var v=d.replace(`
`,"").trim();return f+(" -> Belt.Option.orElse("+X(v)+")")},"")+" -> Belt.Option.getExn";o=`  None
      
`+c}var a=i?`let itemToObjectMapper = dict => {
`+o+`
}
 `:"let get"+w(e)+` = str => {
`+o+`
}
 `;return br(a,r,n)}h.replaceFirstLetterLower=uu;h.replaceFirstLetterUpper=w;h.getRecordType=L;h.defaultUserTypedValue=Or;h.defaultValueMapper=Ur;h.filterTypeName=G;h.getDefaultValue=fe;h.funcWarning=iu;h.getFunctionName=ve;h.typeFunctionMapper=de;h.typeFunctionMapperEnum=ge;h.enumFunctionMapper=X;h.getFuntionStr=Dr;h.getFuntionStrEnum=Nr;h.getObjectFunction=Fr;h.getObjectFunctionEnum=Sr;h.generateNestedObject=br;h.generateDecode=ou});var O=require("vscode"),z=require("fs"),j=require("path"),cu=De(),{languages:au,commands:Ir,workspace:su}=O,lu=Br(),pe=class{constructor(){this.codeLenses=[],this.regex=/type\s+(\w+)\s+=\s+\{/g,this._onDidChangeCodeLenses=new O.EventEmitter,this.onDidChangeCodeLenses=this._onDidChangeCodeLenses.event,O.workspace.onDidChangeConfiguration(r=>{this._onDidChangeCodeLenses.fire()})}provideCodeLenses(r,n){if(O.workspace.getConfiguration("rescript-decode").get("enableDecodeButton",!0)){this.codeLenses=[];let t=new RegExp(this.regex),u=r.getText(),i;for(;(i=t.exec(u))!==null;){let o=r.lineAt(r.positionAt(i.index).line),c=o.text.indexOf(i[0]),a=new O.Position(o.lineNumber,c),f=r.getWordRangeAtPosition(a,new RegExp(this.regex));f&&this.codeLenses.push(new O.CodeLens(f))}return this.codeLenses}return[]}resolveCodeLens(r,n){if(O.workspace.getConfiguration("rescript-decode").get("enableDecodeButton",!0)){let u=O.window.activeTextEditor.document.lineAt(r.range.start.line).text;return r.command={title:"Generate Decode",tooltip:"Click to generate decode function",command:"rescript-decode.generateDecode",arguments:[u,!1]},r}return null}};function fu(e){let r=j.join(e,".decodeIgnore");if(z.existsSync(r)){let n=z.readFileSync(r,"utf8");return cu().add(n)}else return null}function vu(e){let r={},n=fu(e);function t(u){z.readdirSync(u).forEach(o=>{let c=j.join(u,o),a=j.relative(e,c),f=z.statSync(c);if(n&&n.ignores(a)){console.log(`Ignoring: ${a}`);return}if(f.isDirectory())t(c);else if(f.isFile()){let d=z.readFileSync(c,"utf8");r[j.parse(c).name]=d}})}return t(e),r}function du(e){let r=new pe;au.registerCodeLensProvider("*",r);let n=O.workspace.workspaceFolders;if(!n){O.window.showErrorMessage("No workspace folder is open");return}let t=n[0].uri.fsPath,u=vu(t);Ir.registerCommand("rescript-decode.enableDecodeButton",()=>{su.getConfiguration("rescript-decode").update("enableDecodeButton",!0,!0)}),Ir.registerCommand("rescript-decode.generateDecode",i=>{console.log("initial came here");let o=/type\s+(\w+)\s+=/,c=O.window.activeTextEditor;if(!c){O.window.showErrorMessage("No active editor found.");return}let a=i.match(o);if(a){let f=a[1],d=c.document.getText();console.log("before generation came here");let v=lu.generateDecode(f,d,u);console.log("after generation came here");let m=`open LogicUtils // Import Utilities from your Utils file
        ${v}
        `;console.log("after generation came here"),O.env.clipboard.writeText(m).then(()=>{O.window.showInformationMessage(`${f} : Generated code copied to clipboard.`)})}else O.window.showErrorMessage("No Type Found")})}function gu(){}module.exports={activate:du,deactivate:gu};
